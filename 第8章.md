## HTML Attributes 定义在 HTML 标签上的属性

## DOM properties，dom 元素上的属性，很多都相似，但是类在 html 使 class，dom 上是 className

## aria-\*只有 html 属性

```
  <input value="foo">
  <!-- el.value就是输入框现在的值，但是el.getAttribute('value')始终是foo不会变，等同于el.defaultValue -->

  <input type="foo">
  <!-- html属性会校验修正不合法的值 -->
  <!-- console.log(el.type)   显示为text  -->
```

## HTML 属性的作用是设置与之对应的 dom 属性初始值

## 以禁用按钮为例

```
<button disabled>Button</button>

const  button = {
  type:'button',
  props:{
    disabled:''
  }
}


<button :disabled="false">Button</button>
const  button = {
  type:'button',
  props:{
    disabled:false
  }
}
如果当成htm属性,注意html上的值全部会被当成字符串
el.setAttribute('disabled',false)
等价 el.setAttribute('disabled','false')
按钮会被禁用
```

## 解决，优先设置为 dom properties

```js
function mountElement(vnode, container) {
  const el = document.createElement(vnode.type);
  if (vnode.props) {
    for (const key in vnode.props) {
      const value = vnode.props[key];
      if (key in el) {
        if (typeof value === "boolean" && value === "") {
          el[key] = true;
        } else {
          el[key] = value;
        }
      } else {
        el.setAttribute(key, value);
      }
    }
  }
}
```

## 设置 class 三种方式,el.setAttribute 性能最优

- setAttribute
- el.className
- el.classList

## 卸载不能通过 innerHTML 直接清空

- 没有调用 beforeUnmount、unmounted 等声明周期函数
- 没有调用自定义指令的卸载钩子
- 不会移除 dom 上的时间处理函数

```js
function mountElement(vnode, container) {
  const el = (vnode.el = document.createElement(vnode.type));
}

function render(vnode, container) {
  if (vnode) {
    patch(container._vnode, vnode, container);
  } else {
    if (container._vnode) {
      unmount(vnode);
    }
  }
}
function unmount(vnode) {
  const el = vnode.el;
  const parent = el.parent;
  if (parent) parent.removeChild(el);
}
```
